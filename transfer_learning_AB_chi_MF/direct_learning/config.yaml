# Configuration for Polymer-Water χ Direct Learning (No Transfer Learning)

# Data paths
data:
  exp_raw: "../Data/Experiment_chi_data.csv"
  exp_features: "EXP_features.csv"

# Feature settings
features:
  morgan:
    radius: 3
    nBits: 1024
  # Descriptors: will use all valid RDKit descriptors
  # List will be computed and filtered during feature computation

# Global settings
global:
  n_folds: 5  # For experimental CV
  mc_dropout_samples: 100  # Number of MC dropout samples for uncertainty

# Optuna settings
optuna:
  study_name: "polymer_chi_direct_learning"
  n_trials: 1000
  direction: "maximize"  # Maximize mean validation R²
  storage: "sqlite:///hyperparameter_optimization/optuna_study.db"

# Hyperparameter search space for Optuna
hyperparameters:
  # Feature mode: which features to use
  feature_mode:
    type: "categorical"
    choices: ["fp", "desc", "fp_desc"]

  # Model architecture
  n_layers:
    type: "int"
    low: 2
    high: 7

  # Per-layer dimension sampling
  hidden_dim_per_layer:
    type: "categorical"
    choices: [32, 64, 128, 256, 512]
    description: "Sampled independently for each layer"

  dropout_rate:
    type: "float"
    low: 0.1
    high: 0.4

  # Regularization
  weight_decay:
    type: "loguniform"
    low: 1.0e-6
    high: 1.0e-3

  # Training on experimental data (direct learning, no pretraining)
  lr:
    type: "loguniform"
    low: 1.0e-6
    high: 1.0e-2

  epochs:
    type: "int"
    low: 500
    high: 2000

  batch_size:
    type: "categorical"
    choices: [1, 2, 4, 8, 16, 32]

  # Data split seed for experimental 5-fold CV
  split_seed:
    type: "int"
    low: 0
    high: 999

# Default hyperparameters (used if no Optuna best params found)
defaults:
  feature_mode: "fp_desc"
  n_layers: 3
  hidden_dims: [256, 128, 64]  # Decreasing funnel architecture
  dropout_rate: 0.2
  weight_decay: 1.0e-4
  lr: 1.0e-3
  epochs: 1000
  batch_size: 16
  split_seed: 42

# Output settings
outputs:
  base_dir: "outputs"
  plots_dir: "outputs/plots"
  metrics_dir: "outputs/metrics"
  models_dir: "outputs/models"
