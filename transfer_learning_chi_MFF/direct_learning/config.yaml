# Configuration for Direct Learning: Polymer-Water Chi Parameter Prediction
# Training directly on experimental data without transfer learning

# Data paths
data:
  exp_csv: "../Data/Experiment_chi_data.csv"

# Feature settings
features:
  morgan_fp:
    radius: 3
    nBits: 1024
  # Use all valid RDKit descriptors
  use_all_descriptors: true
  mc_dropout_samples: 100  # Number of MC dropout samples for evaluation

# Model architecture defaults (used if not running Optuna)
model:
  n_layers: 3
  hidden_dims: [256, 128, 64]  # List of dimensions, one per layer
  dropout_rate: 0.2

# Training defaults (used if not running Optuna)
training:
  # Direct training on experimental data
  lr: 0.0001
  epochs: 200
  batch_size: 4
  weight_decay: 0.0001

  # Feature mode
  feature_mode: "fp_desc_T"  # "fp_T", "desc_T", or "fp_desc_T"

  # Experimental split seed
  split_seed: 42

# Optuna hyperparameter optimization settings
optuna:
  study_name: "polymer_chi_direct_learning"
  n_trials: 1000
  direction: "maximize"  # Maximize mean validation RÂ²

  # Hyperparameter search space
  search_space:
    # Feature engineering
    feature_mode:
      type: "categorical"
      choices: ["fp_T", "desc_T", "fp_desc_T"]

    # Model architecture
    n_layers:
      type: "int"
      low: 2
      high: 7

    hidden_dims_per_layer:
      type: "categorical"
      choices: [32, 64, 128, 256, 512]  # Each layer samples from this

    dropout_rate:
      type: "float"
      low: 0.1
      high: 0.4

    # Weight decay
    weight_decay:
      type: "loguniform"
      low: 1.0e-5
      high: 1.0e-2

    # Training hyperparameters
    lr:
      type: "loguniform"
      low: 1.0e-5
      high: 1.0e-3

    epochs:
      type: "int"
      low: 1000
      high: 1000

    batch_size:
      type: "categorical"
      choices: [1, 2, 4, 8, 16, 32]

    # Data split seed for experimental data
    split_seed:
      type: "int"
      low: 0
      high: 999

# Output directories
outputs:
  hyperparameter_dir: "hyperparameter_optimization"
  results_dir: "Results"
  figures_dir: "Figures"

# Plotting settings
plotting:
  figure_size: [4.5, 4.5]
  font_size: 12
  dpi: 600
  n_bins_exp: 5   # Number of bins for experimental calibration plots
